@model Site.Models.Kitap

@{
    ViewData["Title"] = "Kitap Detayı";

    var renkler = GetTurRenk(Model.Tür);
    var durumRenk = GetDurumRenk(Model.Durum);
}

<div class="container py-5 mt-4">

    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-action="Index" class="text-decoration-none text-muted">Kütüphanem</a></li>
            <li class="breadcrumb-item active" aria-current="page">@Model.KitapAdı</li>
        </ol>
    </nav>

    <div class="row justify-content-center">
        <div class="col-lg-10">

            <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
                <div class="card-body p-0">
                    <div class="row g-0">

                        <div class="col-md-4 d-flex flex-column align-items-center justify-content-center p-5 border-end position-relative overflow-hidden @renkler.BgClass"
                             style="background-color: var(--bs-@renkler.BaseColor-bg-subtle);">

                            <i class="fas fa-book position-absolute start-0 bottom-0 mb-n5 ms-n5 @renkler.TextClass"
                               style="font-size: 15rem; opacity: 0.05; transform: rotate(15deg);"></i>

                            <div class="rounded-4 shadow bg-body p-4 mb-4 d-flex align-items-center justify-content-center position-relative z-1"
                                 style="width: 160px; height: 220px; transform: rotate(-2deg);">
                                <i class="fas fa-book fa-5x @renkler.TextClass"></i>
                            </div>

                            <div class="text-center position-relative z-1">
                                <h5 class="fw-bold mb-2 text-body">@Model.YazarAdı</h5>
                                <span class="badge @renkler.BadgeClass border @renkler.BorderClass rounded-pill px-3 py-2">
                                    @Model.Tür
                                </span>
                            </div>
                        </div>

                        <div class="col-md-8 p-5 bg-body">

                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div>
                                    <h1 class="display-5 fw-bold text-body mb-2">@Model.KitapAdı</h1>
                                    <div style="width: 80px; height: 6px; border-radius: 3px;" class="bg-@renkler.BaseColor opacity-75"></div>
                                </div>

                                <a asp-action="Delete" asp-route-id="@Model.ID" class="btn btn-outline-danger btn-sm rounded-circle p-2 shadow-sm"
                                   title="Kitabı Sil" style="width: 40px; height: 40px; display:flex; align-items:center; justify-content:center;">
                                    <i class="fas fa-trash-alt"></i>
                                </a>
                            </div>

                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <div class="alert @durumRenk.AlertClass border-0 d-flex align-items-center m-0 rounded-3 shadow-sm h-100">
                                        <i class="fas @durumRenk.Icon me-3 fs-4"></i>
                                        <div>
                                            <small class="d-block opacity-75 text-uppercase fw-bold" style="font-size: 0.7rem;">Okuma Durumu</small>
                                            <span class="fw-bold fs-5">@Model.Durum</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="alert alert-light border d-flex align-items-center m-0 rounded-3 shadow-sm h-100 bg-body-tertiary">
                                        <i class="fas fa-star text-warning me-3 fs-4"></i>
                                        <div>
                                            <small class="d-block text-muted text-uppercase fw-bold" style="font-size: 0.7rem;">Puanım</small>
                                            <div class="text-warning fs-5">
                                                @if (Model.Puan > 0)
                                                {
                                                    @for (int i = 0; i < Model.Puan; i++)
                                                    {
                                                        <i class="fas fa-star"></i>
                                                    }
                                                    @for (int i = Model.Puan; i < 5; i++)
                                                    {
                                                        <i class="far fa-star text-muted opacity-25"></i>
                                                    }
                                                }
                                                else
                                                {
                                                    <span class="text-muted small fw-normal fst-italic">Puanlanmadı</span>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row g-4 mb-5">
                                <div class="col-sm-6">
                                    <div class="d-flex align-items-center p-3 rounded-4 border bg-body-tertiary h-100 transition-hover">
                                        <div class="bg-primary bg-opacity-10 text-primary p-3 rounded-circle me-3">
                                            <i class="fas fa-building fa-lg"></i>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block text-uppercase fw-bold" style="font-size: 0.7rem;">Yayın Evi</small>
                                            <span class="fw-bold text-body fs-5">@Model.YayınEvi</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="d-flex align-items-center p-3 rounded-4 border bg-body-tertiary h-100 transition-hover">
                                        <div class="bg-success bg-opacity-10 text-success p-3 rounded-circle me-3">
                                            <i class="fas fa-file-alt fa-lg"></i>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block text-uppercase fw-bold" style="font-size: 0.7rem;">Sayfa Sayısı</small>
                                            <span class="fw-bold text-body fs-5">@Model.SayfaSayısı</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="d-flex align-items-center p-3 rounded-4 border bg-body-tertiary h-100 transition-hover">
                                        <div class="bg-warning bg-opacity-10 text-warning p-3 rounded-circle me-3">
                                            <i class="fas fa-calendar-alt fa-lg"></i>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block text-uppercase fw-bold" style="font-size: 0.7rem;">Basım Yılı</small>
                                            <span class="fw-bold text-body fs-5">@Model.Yıl</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-6">
                                    <div class="d-flex align-items-center p-3 rounded-4 border bg-body-tertiary h-100 transition-hover">
                                        <div class="bg-secondary bg-opacity-10 text-secondary p-3 rounded-circle me-3">
                                            <i class="fas fa-clock fa-lg"></i>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block text-uppercase fw-bold" style="font-size: 0.7rem;">Eklenme Tarihi</small>
                                            <span class="fw-bold text-body fs-5">@Model.EklenmeTarihi.ToString("dd MMM yyyy")</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="d-flex align-items-center p-3 rounded-4 border bg-body-tertiary h-100 transition-hover">
                                        <div class="bg-info bg-opacity-10 text-info p-3 rounded-circle me-3">
                                            <i class="fas fa-barcode fa-lg"></i>
                                        </div>
                                        <div>
                                            <small class="text-muted d-block text-uppercase fw-bold" style="font-size: 0.7rem;">ISBN</small>
                                            <span class="fw-bold text-body fs-5">@(string.IsNullOrEmpty(Model.ISBN) ? "-" : Model.ISBN)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex gap-3">
                                <a asp-action="Edit" asp-route-id="@Model.ID" class="btn btn-@renkler.BaseColor px-5 py-2 rounded-pill fw-bold shadow-sm flex-grow-1 text-white">
                                    <i class="fas fa-pen me-2"></i> Düzenle
                                </a>
                                <a asp-action="Index" class="btn btn-soft px-4 py-2 rounded-pill fw-bold border text-muted shadow-sm">
                                    <i class="fas fa-arrow-left me-2"></i> Geri
                                </a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .transition-hover {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

        .transition-hover:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
</style>

@functions {
    public (string BadgeClass, string BorderClass, string BgClass, string TextClass, string BaseColor) GetTurRenk(string tur)
    {
        string baseColor = "secondary";
        switch (tur)
        {
            case "Roman": baseColor = "primary"; break;
            case "Hikaye": baseColor = "success"; break;
            case "Bilim Kurgu": baseColor = "info"; break;
            case "Distopya": baseColor = "secondary"; break;
            case "Fantastik": baseColor = "info"; break;
            case "Masal": baseColor = "danger"; break;
            case "Tarih": baseColor = "warning"; break;
            case "Kişisel Gelişim": baseColor = "success"; break;
            case "Felsefe": baseColor = "secondary"; break;
            case "Şiir": baseColor = "danger"; break;
            case "Biyografi": baseColor = "primary"; break;
            case "Eğitim": baseColor = "primary"; break;
        }
        return (BadgeClass: $"bg-{baseColor} bg-opacity-10 text-{baseColor}", BorderClass: $"border-{baseColor} border-opacity-25", BgClass: $"bg-{baseColor} bg-opacity-10", TextClass: $"text-{baseColor}", BaseColor: baseColor);
    }

    public (string AlertClass, string Icon) GetDurumRenk(string durum)
    {
        string color = "secondary";
        string icon = "fa-circle";
        switch (durum)
        {
            case "Okunuyor": color = "warning"; icon = "fa-book-reader"; break;
            case "Okundu": color = "success"; icon = "fa-check-circle"; break;
            case "Yarım Kaldı": color = "danger"; icon = "fa-bookmark"; break;
            case "Listede": color = "secondary"; icon = "fa-list"; break;
        }
        return (AlertClass: $"alert-{color}", Icon: icon);
    }
}